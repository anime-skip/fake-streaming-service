<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link
      rel="icon"
      type="image/png"
      href="https://www.anime-skip.com/favicon.ico"
    />
    <title>Test Overlay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
  </head>

  <body>
    <div class="video-container">
      <div class="glass"></div>
      <video id="video" src="video.mp4" controls></video>
    </div>
    <p id="key-press"></p>
    <p>Episode: <span id="episode"></span></p>
    <p>Show: <span id="show"></span></p>
    <p>Season: <span id="season"></span></p>
    <p>Number: <span id="number"></span></p>
    <p>Absolute Number: <span id="absolute-number"></span></p>
  </body>

  <script>
    console.debug("added key listener");
    const keyPress = document.getElementById("key-press");
    document.addEventListener("keydown", function (event) {
      console.debug("[example] pressed key: " + event.key);
      keyPress.innerText = event.key;
    });
    document.onkeydown = function (event) {
      console.debug("[example] onkeydown");
      keyPress.innerText = event.key;
    };

    console.debug("Dynamic episode details");
    const details = {
      episode: "Danzoâ€™s Right Arm",
      show: "Naruto Shippuden",
      season: "Directors Cut",
      number: "5.5",
      absoluteNumber: "Six",
    };

    const urlSearchParams = new URLSearchParams(window.location.search);
    const params = Object.fromEntries(urlSearchParams.entries());
    const dynamicDetails = {
      ...details,
      ...params,
    };
    for (const [key, value] of Object.entries(dynamicDetails)) {
      const element = document.getElementById(key);
      if (element) {
        element.innerText = value;
      }
    }
    console.debug(dynamicDetails);
  </script>
</html>
